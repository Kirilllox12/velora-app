<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Velora</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app">
        <div class="titlebar">
            <div class="titlebar-drag"><span class="logo">VELORA</span></div>
            <div class="titlebar-buttons">
                <button onclick="window.minimize()">-</button>
                <button onclick="window.maximize()">O</button>
                <button class="btn-close" onclick="window.closeApp()">X</button>
            </div>
        </div>

        <div id="auth-screen" class="screen" style="display:flex">
            <div class="auth-panel glass">
                <h1>Velora</h1>
                <p class="subtitle">–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è</p>
                <div class="tabs">
                    <button class="tab active" onclick="window.switchTab('login')">–í—Ö–æ–¥</button>
                    <button class="tab" onclick="window.switchTab('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>
                <form id="auth-form">
                    <div class="input-group"><input type="text" id="username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"></div>
                    <div class="input-group"><input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å"></div>
                    <div id="register-fields" style="display:none">
                        <div class="input-group"><input type="password" id="password2" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å"></div>
                        <div class="input-group"><input type="text" id="displayname" placeholder="–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è"></div>
                    </div>
                    <div class="error" id="auth-error"></div>
                    <button type="submit" class="btn-primary" id="auth-btn">–í–æ–π—Ç–∏</button>
                </form>
                <button class="btn-support" onclick="window.showSupportModal()">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
            </div>
        </div>

        <div id="chat-screen" class="screen" style="display:none">
            <div class="chat-layout">
                <div class="sidebar glass">
                    <div class="sidebar-header">
                        <button class="btn-menu" onclick="window.showMainSettings()">M</button>
                        <div class="search-box">
                            <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ @username..." oninput="window.doSearch()" onkeydown="if(event.key==='Escape')window.clearSearch()">
                            <button class="search-clear" onclick="window.clearSearch()" style="display:none" id="search-clear-btn">X</button>
                        </div>
                    </div>
                    <div class="sidebar-actions">
                        <button onclick="window.showCreateGroup()">–ì—Ä—É–ø–ø–∞</button>
                        <button onclick="window.showCreateChannel()">–ö–∞–Ω–∞–ª</button>
                        <button onclick="window.showJoinChat()">–ü–æ —Å—Å—ã–ª–∫–µ</button>
                    </div>
                    <div class="section-title">–ß–ê–¢–´</div>
                    <div class="chats-list" id="chats-list"></div>
                    <div class="search-results" id="search-results" style="display:none"></div>
                </div>
                
                <div class="chat-panel glass">
                    <div id="empty-chat" class="empty-chat"><div class="empty-text">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</div></div>
                    <div id="chat-content" style="display:none;flex-direction:column;height:100%">
                        <div class="chat-header" onclick="window.showChatProfile()">
                            <div class="chat-icon" id="chat-avatar"></div>
                            <div class="chat-header-info">
                                <div class="chat-header-name" id="chat-title">–ß–∞—Ç</div>
                                <div class="chat-header-status" id="chat-subtitle"></div>
                            </div>
                        </div>
                        <div class="messages" id="messages"></div>
                        <div class="message-input-area">
                            <div id="reply-preview" class="reply-preview-input" style="display:none">
                                <div class="reply-info"><span>–û—Ç–≤–µ—Ç <b id="reply-to-name"></b></span><span id="reply-to-text"></span></div>
                                <button onclick="window.cancelReply()">X</button>
                            </div>
                            <div class="message-input">
                                <button class="btn-attach" onclick="window.showAttachMenu()">+</button>
                                <input type="text" id="message-text" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ...">
                                <button class="btn-voice" id="voice-btn" onclick="window.startVoiceRecord()">mic</button>
                                <button class="btn-send" onclick="window.sendMessage()">send</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="attach-menu" class="popup-menu" style="display:none">
        <div class="popup-content glass">
            <button onclick="window.attachPhoto()">–§–æ—Ç–æ</button>
            <button onclick="window.attachVideo()">–í–∏–¥–µ–æ</button>
            <button onclick="window.attachFile()">–§–∞–π–ª</button>
            <button onclick="window.startCircleRecord()">–ö—Ä—É–∂–æ–∫</button>
        </div>
    </div>

    <div id="message-menu" class="context-menu glass" style="display:none">
        <button onclick="window.menuReply()">‚Ü© –û—Ç–≤–µ—Ç–∏—Ç—å</button>
        <button onclick="window.menuForward()">‚Üó –ü–µ—Ä–µ—Å–ª–∞—Ç—å</button>
        <button id="menu-translate" onclick="window.menuTranslate()" style="display:none">üåç –ü–µ—Ä–µ–≤–µ—Å—Ç–∏</button>
        <div class="reaction-row">
            <button onclick="window.menuReaction('üëç')">üëç</button>
            <button onclick="window.menuReaction('‚ù§Ô∏è')">‚ù§Ô∏è</button>
            <button onclick="window.menuReaction('üòÇ')">üòÇ</button>
            <button onclick="window.menuReaction('üòÆ')">üòÆ</button>
            <button onclick="window.menuReaction('üò¢')">üò¢</button>
            <button onclick="window.menuReaction('üî•')">üî•</button>
        </div>
        <button id="menu-delete" class="danger" onclick="window.menuDelete()">üóë –£–¥–∞–ª–∏—Ç—å</button>
    </div>

    <!-- User Profile Modal -->
    <div id="user-profile-modal" class="modal" style="display:none">
        <div class="profile-view glass">
            <div class="profile-header">
                <button onclick="window.closeModal()">X</button>
            </div>
            <div class="profile-avatar-section">
                <div class="avatar xlarge" id="profile-avatar">U</div>
                <div class="profile-badges" id="profile-badges"></div>
            </div>
            <div class="profile-name" id="profile-name">User</div>
            <div class="profile-username" id="profile-username">@user</div>
            <div class="profile-status" id="profile-status"></div>
            <div class="profile-bio" id="profile-bio"></div>
            <div class="profile-gifts" id="profile-gifts"></div>
            <div class="profile-actions">
                <button class="btn-primary" onclick="window.openPrivateChatFromProfile()">–ù–∞–ø–∏—Å–∞—Ç—å</button>
                <button class="btn-secondary" onclick="window.sendGift()">–ü–æ–¥–∞—Ä–æ–∫</button>
                <button class="btn-secondary" onclick="window.transferCrystals()">–ö—Ä–∏—Å—Ç–∞–ª–ª—ã</button>
            </div>
        </div>
    </div>

    <!-- Chat/Channel Profile Modal -->
    <div id="chat-profile-modal" class="modal" style="display:none">
        <div class="profile-view glass">
            <div class="profile-header">
                <button onclick="window.closeModal()">X</button>
                <span id="chat-profile-type">–ì—Ä—É–ø–ø–∞</span>
                <button id="chat-edit-btn" onclick="window.editChat()" style="display:none">edit</button>
            </div>
            <div class="profile-avatar-section">
                <div class="chat-icon xlarge" id="chat-profile-avatar">G</div>
            </div>
            <div class="profile-name" id="chat-profile-name">–ß–∞—Ç</div>
            <div class="profile-bio" id="chat-profile-desc"></div>
            <div class="profile-info">
                <div class="info-row"><span>–°—Å—ã–ª–∫–∞</span><span id="chat-profile-link" onclick="window.copyLink()"></span></div>
                <div class="info-row"><span>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</span><span id="chat-profile-members">0</span></div>
                <div class="info-row"><span>–°–æ–∑–¥–∞—Ç–µ–ª—å</span><span id="chat-profile-owner"></span></div>
            </div>
            <div class="profile-actions">
                <button class="btn-secondary" onclick="window.copyLink()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                <button class="btn-danger" onclick="window.leaveChat()">–ü–æ–∫–∏–Ω—É—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Gift Modal -->
    <div id="gift-modal" class="modal" style="display:none">
        <div class="modal-content glass">
            <h2>RKM –ü–æ–¥–∞—Ä–∫–∏</h2>
            <div class="gifts-grid" id="gifts-grid"></div>
            <button class="btn-secondary" onclick="window.closeModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- Forward Modal -->
    <div id="forward-modal" class="modal" style="display:none">
        <div class="modal-content glass">
            <h2>–ü–µ—Ä–µ—Å–ª–∞—Ç—å</h2>
            <div class="forward-preview-box"><p id="forward-preview"></p></div>
            <div class="forward-list" id="forward-list"></div>
            <button class="btn-secondary" onclick="window.closeModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- Create Group -->
    <div id="create-group-modal" class="modal" style="display:none">
        <div class="modal-content glass">
            <h2>–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</h2>
            <div class="chat-avatar-edit" onclick="window.pickChatAvatar('group')">
                <div class="chat-icon" id="group-avatar">G</div>
                <div class="avatar-overlay">—Ñ–æ—Ç–æ</div>
            </div>
            <div class="input-group"><input type="text" id="group-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ"></div>
            <div class="input-group"><input type="text" id="group-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></div>
            <label><input type="checkbox" id="group-public"> –ü—É–±–ª–∏—á–Ω–∞—è</label>
            <button class="btn-primary" onclick="window.createGroup()">–°–æ–∑–¥–∞—Ç—å</button>
            <button class="btn-secondary" onclick="window.closeModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- Create Channel -->
    <div id="create-channel-modal" class="modal" style="display:none">
        <div class="modal-content glass">
            <h2>–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª</h2>
            <div class="chat-avatar-edit" onclick="window.pickChatAvatar('channel')">
                <div class="chat-icon" id="channel-avatar">C</div>
                <div class="avatar-overlay">—Ñ–æ—Ç–æ</div>
            </div>
            <div class="input-group"><input type="text" id="channel-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ"></div>
            <div class="input-group"><input type="text" id="channel-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></div>
            <label><input type="checkbox" id="channel-public"> –ü—É–±–ª–∏—á–Ω—ã–π</label>
            <button class="btn-primary" onclick="window.createChannel()">–°–æ–∑–¥–∞—Ç—å</button>
            <button class="btn-secondary" onclick="window.closeModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- Join Chat -->
    <div id="join-chat-modal" class="modal" style="display:none">
        <div class="modal-content glass">
            <h2>–í–æ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ</h2>
            <div class="input-group"><input type="text" id="join-link" placeholder="–°—Å—ã–ª–∫–∞"></div>
            <button class="btn-primary" onclick="window.joinChat()">–í–æ–π—Ç–∏</button>
            <button class="btn-secondary" onclick="window.closeModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- Main Settings -->
    <div id="main-settings" class="modal" style="display:none">
        <div class="settings-panel glass">
            <div class="settings-header">
                <button onclick="window.closeModal()">X</button>
                <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </div>
            <div class="profile-section" onclick="window.showMyProfile()">
                <div class="avatar large" id="settings-avatar">U</div>
                <div>
                    <div class="settings-name" id="settings-name">User</div>
                    <div class="settings-sub" id="settings-username">@user</div>
                </div>
            </div>
            <div class="crystals-display">
                <span class="crystals-icon">üíé</span>
                <div class="crystals-info">
                    <div class="crystals-amount" id="my-crystals">0</div>
                    <div class="crystals-label">–∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤</div>
                </div>
            </div>
            <div class="settings-menu">
                <button onclick="window.showMyProfile()">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</button>
                <button id="support-btn" onclick="window.showSupportChat()">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
                <button id="inbox-btn" style="display:none" onclick="window.showSupportInbox()">–í—Ö–æ–¥—è—â–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è</button>
                <button onclick="window.showPremiumModal()" class="premium-btn">Premium</button>
                <button onclick="window.showAppearanceSettings()">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</button>
                <button onclick="window.showNotifSettings()">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
                <button onclick="window.showDeviceSettings()">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</button>
                <button onclick="window.showLanguageSettings()">–Ø–∑—ã–∫</button>
                <button id="admin-btn" style="display:none" onclick="window.showAdminPanel()">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
                <button class="danger" onclick="window.logout()">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </div>

    <!-- My Profile Edit -->
    <div id="my-profile-modal" class="modal" style="display:none">
        <div class="settings-panel glass">
            <div class="settings-header">
                <button onclick="window.backToSettings()">back</button>
                <span>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</span>
                <button onclick="window.saveProfile()">save</button>
            </div>
            <div class="avatar-edit" onclick="window.pickAvatar()">
                <div class="avatar xlarge" id="edit-avatar">U</div>
                <div class="avatar-overlay">—Ñ–æ—Ç–æ</div>
            </div>
            <div class="form-section"><label>–ò–º—è</label><input type="text" id="edit-name"></div>
            <div class="form-section"><label>–û —Å–µ–±–µ</label><textarea id="edit-bio"></textarea></div>
            <div class="my-gifts-section">
                <label>–ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏</label>
                <div class="my-gifts" id="my-gifts-list"></div>
            </div>
            <div class="my-aliases-section">
                <label>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ @username <span id="aliases-count">(0/0)</span></label>
                <div class="my-aliases" id="my-aliases-list"></div>
                <div class="add-alias-row" id="add-alias-row" style="display:none">
                    <input type="text" id="new-alias-input" placeholder="–ù–æ–≤—ã–π @username">
                    <button onclick="window.addAlias()">+</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Appearance Settings -->
    <div id="appearance-settings" class="modal" style="display:none">
        <div class="settings-panel glass">
            <div class="settings-header">
                <button onclick="window.backToSettings()">back</button>
                <span>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</span>
            </div>
            <div class="form-section">
                <label>–¢–µ–º–∞</label>
                <div class="theme-options">
                    <button class="theme-btn active" onclick="window.setTheme('dark')">–¢—ë–º–Ω–∞—è</button>
                    <button class="theme-btn" onclick="window.setTheme('light')">–°–≤–µ—Ç–ª–∞—è</button>
                    <button class="theme-btn" onclick="window.setTheme('purple')">–§–∏–æ–ª–µ—Ç–æ–≤–∞—è</button>
                </div>
            </div>
            <div class="form-section">
                <label>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞</label>
                <select id="font-size-select" onchange="window.setFontSize(this.value)">
                    <option value="small">–ú–∞–ª–µ–Ω—å–∫–∏–π</option>
                    <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                    <option value="large">–ë–æ–ª—å—à–æ–π</option>
                </select>
            </div>
            <div class="form-section">
                <label>–¶–≤–µ—Ç –∞–∫—Ü–µ–Ω—Ç–∞</label>
                <div class="colors" id="accent-colors"></div>
            </div>
        </div>
    </div>

    <!-- Notification Settings -->
    <div id="notif-settings" class="modal" style="display:none">
        <div class="settings-panel glass">
            <div class="settings-header">
                <button onclick="window.backToSettings()">back</button>
                <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
            </div>
            <div class="form-section">
                <label class="toggle-label"><input type="checkbox" id="notif-sound" checked onchange="window.toggleSound()"> –ó–≤—É–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</label>
            </div>
            <div class="form-section">
                <label class="toggle-label"><input type="checkbox" id="notif-desktop" checked> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ</label>
            </div>
            <div class="form-section">
                <label class="toggle-label"><input type="checkbox" id="notif-preview" checked> –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç</label>
            </div>
        </div>
    </div>

    <!-- Language Settings -->
    <div id="language-settings" class="modal" style="display:none">
        <div class="settings-panel glass">
            <div class="settings-header">
                <button onclick="window.backToSettings()">back</button>
                <span>–Ø–∑—ã–∫</span>
            </div>
            <div class="lang-list">
                <button class="lang-btn active" onclick="window.setLang('ru',this)">–†—É—Å—Å–∫–∏–π</button>
                <button class="lang-btn" onclick="window.setLang('en',this)">English</button>
                <button class="lang-btn" onclick="window.setLang('uk',this)">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</button>
            </div>
        </div>
    </div>

    <!-- Device Settings -->
    <div id="device-settings" class="modal" style="display:none">
        <div class="settings-panel glass">
            <div class="settings-header">
                <button onclick="window.backToSettings()">back</button>
                <span>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</span>
            </div>
            <div class="form-section"><label>–ú–∏–∫—Ä–æ—Ñ–æ–Ω</label><select id="mic-select"></select></div>
            <div class="form-section"><label>–ö–∞–º–µ—Ä–∞</label><select id="camera-select"></select></div>
            <button class="btn-primary" style="margin:20px" onclick="window.saveDevices()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="modal" style="display:none">
        <div class="admin-panel glass">
            <div class="settings-header">
                <button onclick="window.closeModal()">X</button>
                <span>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
            </div>
            <div class="admin-tabs">
                <button class="active" onclick="window.showAdminTab('users')">–Æ–∑–µ—Ä—ã</button>
                <button onclick="window.showAdminTab('stats')">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                <button onclick="window.showAdminTab('logs')">–õ–æ–≥–∏</button>
                <button onclick="window.showAdminTab('export')">–≠–∫—Å–ø–æ—Ä—Ç</button>
                <button onclick="window.showAdminTab('premium')">üíé Premium</button>
            </div>
            <div class="admin-content" id="admin-content">
                <div class="admin-section">
                    <div class="input-group"><input type="text" id="admin-username" placeholder="@username"></div>
                    <div class="input-group"><input type="text" id="admin-value" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ (–∫—Ä–∏—Å—Ç–∞–ª–ª—ã/–∏–º—è/–ø—Ä–∏—á–∏–Ω–∞/–ø–æ–¥–∞—Ä–æ–∫)"></div>
                    
                    <!-- NFT Uses Section -->
                    <div class="nft-uses-section">
                        <label style="color:rgba(255,255,255,0.5);font-size:12px;margin-bottom:8px;display:block">NFT Uses (–¥–æ–ø. —é–∑–µ—Ä–Ω–µ–π–º—ã)</label>
                        <div class="nft-count-select">
                            <button class="nft-count-btn" onclick="window.setNftCount(1)">1</button>
                            <button class="nft-count-btn" onclick="window.setNftCount(2)">2</button>
                            <button class="nft-count-btn" onclick="window.setNftCount(3)">3</button>
                        </div>
                        <div id="nft-aliases-inputs" style="display:none;margin-top:10px"></div>
                        <button id="nft-give-btn" class="btn-nft-give" style="display:none" onclick="window.giveNftWithAliases()">–í—ã–¥–∞—Ç—å NFT Uses</button>
                    </div>
                    
                    <div class="admin-actions" id="admin-actions"></div>
                </div>
            </div>
            <div class="admin-stats" id="admin-stats" style="display:none">
                <div id="stats-content"></div>
            </div>
            <div class="admin-logs" id="admin-logs" style="display:none">
                <div class="input-group"><input type="text" id="logs-username" placeholder="@username"></div>
                <button class="btn-primary" onclick="window.loadUserLogs()">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                <div id="logs-content"></div>
            </div>
            <div class="admin-export" id="admin-export" style="display:none">
                <button class="btn-primary" onclick="window.exportAllData()">–≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö</button>
                <button class="btn-secondary" onclick="window.exportUsers()">–≠–∫—Å–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</button>
                <button class="btn-secondary" onclick="window.exportMessages()">–≠–∫—Å–ø–æ—Ä—Ç —Å–æ–æ–±—â–µ–Ω–∏–π</button>
                <div id="export-result"></div>
            </div>
            <div class="admin-premium" id="admin-premium" style="display:none">
                <h3 style="margin-bottom:15px;color:#c084fc">–ó–∞—è–≤–∫–∏ –Ω–∞ Premium</h3>
                <p style="color:rgba(255,255,255,0.5);font-size:13px;margin-bottom:15px">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–ø–ª–∞—Ç—É –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ</p>
                <div id="premium-requests-list"></div>
            </div>
        </div>
    </div>

    <!-- Transfer Crystals -->
    <div id="transfer-modal" class="modal" style="display:none">
        <div class="modal-content glass">
            <h2>–ü–µ—Ä–µ–¥–∞—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª—ã</h2>
            <p>–í–∞—à –±–∞–ª–∞–Ω—Å: <b id="transfer-balance">0</b> üíé</p>
            <div class="input-group"><input type="text" id="transfer-to" placeholder="@username"></div>
            <div class="input-group"><input type="number" id="transfer-amount" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" min="1"></div>
            <button class="btn-primary" onclick="window.doTransfer()">–ü–µ—Ä–µ–¥–∞—Ç—å</button>
            <button class="btn-secondary" onclick="window.closeModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- Circle Preview -->
    <div id="circle-preview" class="modal" style="display:none">
        <div class="modal-content glass">
            <video id="circle-video-preview" muted style="width:200px;height:200px;border-radius:50%;object-fit:cover;border:4px solid #c084fc"></video>
            <p style="color:#ef4444;margin:15px 0">–ó–∞–ø–∏—Å—å...</p>
            <div class="modal-buttons">
                <button class="btn-secondary" onclick="window.cancelCircle()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" onclick="window.stopCircleRecord()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Premium Modal -->
    <div id="premium-modal" class="modal" style="display:none">
        <div class="premium-panel glass">
            <div class="settings-header">
                <button onclick="window.closeModal()">X</button>
                <span>Velora Premium</span>
            </div>
            <div class="premium-hero">
                <div class="premium-star">‚òÖ</div>
                <h2>Velora Premium</h2>
                <p>–†–∞–∑–±–ª–æ–∫–∏—Ä—É–π –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</p>
            </div>
            <div class="premium-price">
                <span class="price-amount">159</span>
                <span class="price-currency">—Ä—É–±/–º–µ—Å</span>
            </div>
            <div class="premium-features-list" id="premium-features-list"></div>
            <button class="btn-premium" onclick="window.buyPremium()">–ö—É–ø–∏—Ç—å Premium</button>
            <p class="premium-note">–û—Ç–º–µ–Ω–∞ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è</p>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="payment-modal" class="modal" style="display:none">
        <div class="modal-content glass" style="max-width:400px">
            <h2 style="text-align:center;margin-bottom:20px">üí≥ –û–ø–ª–∞—Ç–∞ Premium</h2>
            
            <div class="payment-info">
                <div class="payment-price">
                    <span style="font-size:32px;font-weight:bold">159 ‚ÇΩ</span>
                    <span style="color:rgba(255,255,255,0.5)">/–º–µ—Å—è—Ü</span>
                </div>
                
                <div class="payment-card" style="background:linear-gradient(135deg,#667eea,#764ba2);padding:20px;border-radius:12px;margin:20px 0">
                    <div style="color:rgba(255,255,255,0.7);font-size:12px;margin-bottom:5px">–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞:</div>
                    <div style="font-size:20px;font-weight:bold;letter-spacing:2px;font-family:monospace" id="card-number">2200 7012 3007 8476</div>
                    <button onclick="window.copyCardNumber()" style="margin-top:10px;padding:8px 16px;background:rgba(255,255,255,0.2);border:none;border-radius:8px;color:white;cursor:pointer">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
                
                <div class="payment-steps" style="text-align:left;background:rgba(255,255,255,0.05);padding:15px;border-radius:10px;margin-bottom:20px">
                    <div style="margin-bottom:10px;color:rgba(255,255,255,0.8)"><b>–ö–∞–∫ –æ–ø–ª–∞—Ç–∏—Ç—å:</b></div>
                    <div style="color:rgba(255,255,255,0.6);font-size:13px;line-height:1.6">
                        1. –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ <b>159 ‚ÇΩ</b> –Ω–∞ –∫–∞—Ä—Ç—É –≤—ã—à–µ<br>
                        2. –í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à <b>@username</b><br>
                        3. –ù–∞–∂–º–∏—Ç–µ "–Ø –æ–ø–ª–∞—Ç–∏–ª" –Ω–∏–∂–µ<br>
                        4. –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–¥–æ 24—á)
                    </div>
                </div>
            </div>
            
            <button class="btn-primary" onclick="window.confirmPayment()" style="width:100%;padding:15px;font-size:16px">‚úì –Ø –æ–ø–ª–∞—Ç–∏–ª</button>
            <button class="btn-secondary" onclick="window.closeModal()" style="width:100%;margin-top:10px">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- Media Viewer -->
    <div id="media-viewer" class="modal" style="display:none">
        <div onclick="window.closeModal()" style="cursor:pointer"><div id="media-content"></div></div>
    </div>

    <!-- Support Modal (for login screen) -->
    <div id="support-modal" class="modal" style="display:none">
        <div class="modal-content glass">
            <h2>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Velora</h2>
            <p style="color:rgba(255,255,255,0.6);margin-bottom:15px">–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–æ–±–ª–µ–º—É –∏ –º—ã –ø–æ–º–æ–∂–µ–º</p>
            <div class="input-group"><input type="email" id="support-email" placeholder="–í–∞—à email –¥–ª—è –æ—Ç–≤–µ—Ç–∞"></div>
            <div class="input-group"><textarea id="support-text" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É..." rows="4" style="resize:none"></textarea></div>
            <button class="btn-primary" onclick="window.sendSupportFromLogin()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            <button class="btn-secondary" onclick="window.closeModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- Support Chat Modal (for regular users) -->
    <div id="support-chat-modal" class="modal" style="display:none">
        <div class="support-chat-panel glass">
            <div class="settings-header">
                <button onclick="window.closeModal()">X</button>
                <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Velora</span>
            </div>
            <div class="support-messages" id="support-messages"></div>
            <div class="support-input-area">
                <input type="text" id="support-message-input" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É..." onkeypress="if(event.key==='Enter')window.sendToSupport()">
                <button onclick="window.sendToSupport()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Support Inbox Modal (for admins @cold, @maloy) -->
    <div id="support-inbox-modal" class="modal" style="display:none">
        <div class="support-inbox-panel glass">
            <div class="settings-header">
                <button onclick="window.closeModal()">X</button>
                <span>–í—Ö–æ–¥—è—â–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è</span>
            </div>
            <div class="inbox-list" id="inbox-list"></div>
        </div>
    </div>

    <!-- Support Conversation Modal (for admins to reply) -->
    <div id="support-conversation-modal" class="modal" style="display:none">
        <div class="support-chat-panel glass">
            <div class="settings-header">
                <button onclick="window.backToInbox()">‚Üê</button>
                <span id="conversation-title">–û–±—Ä–∞—â–µ–Ω–∏–µ</span>
            </div>
            <div class="conversation-info" id="conversation-info"></div>
            <div class="support-messages" id="conversation-messages"></div>
            <div class="support-input-area">
                <input type="text" id="reply-input" placeholder="–û—Ç–≤–µ—Ç–∏—Ç—å..." onkeypress="if(event.key==='Enter')window.sendReply()">
                <button onclick="window.sendReply()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Update Available Modal -->
    <div id="update-modal" class="modal" style="display:none">
        <div class="modal-content glass">
            <h2>–î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ!</h2>
            <p id="update-version" style="color:#22c55e;margin:15px 0">–í–µ—Ä—Å–∏—è 1.0.1</p>
            <p style="color:rgba(255,255,255,0.6)">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ–±–Ω–æ–≤–∏—Ç—å –¥–ª—è –ª—É—á—à–µ–π —Ä–∞–±–æ—Ç—ã</p>
            <button class="btn-primary" onclick="window.downloadUpdate()">–°–∫–∞—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</button>
            <button class="btn-secondary" onclick="window.closeModal()">–ü–æ–∑–∂–µ</button>
        </div>
    </div>

    <input type="file" id="file-input" style="display:none">
    <input type="file" id="avatar-input" style="display:none" accept="image/*" onchange="window.handleAvatarPick(event)">
    <input type="file" id="chat-avatar-input" style="display:none" accept="image/*" onchange="window.handleChatAvatarPick(event)">
    <script src="app.js"></script>
</body>
</html>
