<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Velora</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app">
        <div id="auth-screen" class="screen active">
            <div class="auth-panel">
                <div class="logo">VELORA</div>
                <p class="subtitle">–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è</p>
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('login')">–í—Ö–æ–¥</button>
                    <button class="tab" onclick="switchTab('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>
                <form id="auth-form" onsubmit="submitAuth(event)">
                    <input type="text" id="username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" autocomplete="off">
                    <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å">
                    <div id="register-fields" style="display:none">
                        <input type="password" id="password2" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                        <input type="text" id="displayname" placeholder="–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è">
                    </div>
                    <div class="error" id="auth-error"></div>
                    <button type="submit" class="btn-primary" id="auth-btn">–í–æ–π—Ç–∏</button>
                </form>
            </div>
        </div>

        <div id="chat-screen" class="screen">
            <div class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <button class="btn-menu" onclick="showSettings()">‚ò∞</button>
                    <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ @username..." oninput="doSearch()">
                </div>
                <div class="sidebar-actions">
                    <button onclick="showCreateGroup()">+ –ì—Ä—É–ø–ø–∞</button>
                    <button onclick="showCreateChannel()">+ –ö–∞–Ω–∞–ª</button>
                </div>
                <div class="chats-list" id="chats-list"></div>
                <div class="search-results" id="search-results" style="display:none"></div>
            </div>
            
            <div class="chat-panel" id="chat-panel">
                <div id="empty-chat" class="empty-chat">
                    <div class="empty-text">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</div>
                </div>
                <div id="chat-content" style="display:none">
                    <div class="chat-header" onclick="showChatInfo()">
                        <button class="btn-back" onclick="backToChats(event)">‚Üê</button>
                        <div class="chat-avatar" id="chat-avatar">G</div>
                        <div class="chat-header-info">
                            <div class="chat-title" id="chat-title">–ß–∞—Ç</div>
                            <div class="chat-subtitle" id="chat-subtitle"></div>
                        </div>
                    </div>
                    <div class="messages" id="messages"></div>
                    <div class="reply-preview" id="reply-preview" style="display:none">
                        <div class="reply-info">
                            <span>–û—Ç–≤–µ—Ç –Ω–∞ <b id="reply-to-name"></b></span>
                            <span id="reply-to-text"></span>
                        </div>
                        <button onclick="cancelReply()">‚úï</button>
                    </div>
                    <div class="message-input">
                        <button class="btn-attach" onclick="attachFile()">+</button>
                        <input type="text" id="message-text" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="if(event.key==='Enter')sendMessage()">
                        <button class="btn-send" onclick="sendMessage()">‚û§</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button onclick="closeModal()">‚Üê</button>
                <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </div>
            <div class="profile-section" onclick="showMyProfile()">
                <div class="avatar" id="settings-avatar">U</div>
                <div>
                    <div class="settings-name" id="settings-name">User</div>
                    <div class="settings-sub" id="settings-username">@user</div>
                </div>
            </div>
            <div class="crystals-display">
                <span>üíé</span>
                <span id="my-crystals">0</span> –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤
            </div>
            <div class="settings-menu">
                <button onclick="showMyProfile()">üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</button>
                <button onclick="showPremium()" class="premium-btn">‚≠ê Premium</button>
                <button onclick="showThemes()">üé® –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</button>
                <button id="admin-btn" style="display:none" onclick="showAdminPanel()">üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
                <button class="danger" onclick="logout()">üö™ –í—ã–π—Ç–∏</button>
            </div>
        </div>
    </div>

    <div id="profile-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button onclick="closeModal()">‚Üê</button>
                <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
            </div>
            <div class="profile-view">
                <div class="avatar xlarge" id="profile-avatar">U</div>
                <div class="profile-badges" id="profile-badges"></div>
                <div class="profile-name" id="profile-name">User</div>
                <div class="profile-username" id="profile-username">@user</div>
                <div class="profile-bio" id="profile-bio"></div>
                <div class="profile-gifts" id="profile-gifts"></div>
                <div class="profile-actions">
                    <button class="btn-primary" onclick="openPrivateChat()">–ù–∞–ø–∏—Å–∞—Ç—å</button>
                    <button class="btn-secondary" onclick="sendGift()">üéÅ –ü–æ–¥–∞—Ä–æ–∫</button>
                    <button class="btn-secondary" onclick="transferCrystals()">üíé –ö—Ä–∏—Å—Ç–∞–ª–ª—ã</button>
                </div>
            </div>
        </div>
    </div>

    <div id="my-profile-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button onclick="backToSettings()">‚Üê</button>
                <span>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</span>
                <button onclick="saveProfile()">‚úì</button>
            </div>
            <div class="avatar-edit" onclick="pickAvatar()">
                <div class="avatar xlarge" id="edit-avatar">U</div>
                <div class="avatar-overlay">üì∑</div>
            </div>
            <input type="text" id="edit-name" placeholder="–ò–º—è">
            <textarea id="edit-bio" placeholder="–û —Å–µ–±–µ"></textarea>
        </div>
    </div>

    <div id="create-group-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button onclick="closeModal()">‚Üê</button>
                <span>–ù–æ–≤–∞—è –≥—Ä—É–ø–ø–∞</span>
            </div>
            <input type="text" id="group-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã">
            <input type="text" id="group-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
            <label><input type="checkbox" id="group-public"> –ü—É–±–ª–∏—á–Ω–∞—è</label>
            <button class="btn-primary" onclick="createGroup()">–°–æ–∑–¥–∞—Ç—å</button>
        </div>
    </div>

    <div id="create-channel-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button onclick="closeModal()">‚Üê</button>
                <span>–ù–æ–≤—ã–π –∫–∞–Ω–∞–ª</span>
            </div>
            <input type="text" id="channel-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞">
            <input type="text" id="channel-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
            <label><input type="checkbox" id="channel-public"> –ü—É–±–ª–∏—á–Ω—ã–π</label>
            <button class="btn-primary" onclick="createChannel()">–°–æ–∑–¥–∞—Ç—å</button>
        </div>
    </div>

    <div id="gift-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button onclick="closeModal()">‚Üê</button>
                <span>–ü–æ–¥–∞—Ä–∫–∏</span>
            </div>
            <div class="gifts-grid" id="gifts-grid"></div>
        </div>
    </div>

    <div id="transfer-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button onclick="closeModal()">‚Üê</button>
                <span>–ü–µ—Ä–µ–¥–∞—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª—ã</span>
            </div>
            <p>–í–∞—à –±–∞–ª–∞–Ω—Å: <b id="transfer-balance">0</b> üíé</p>
            <input type="number" id="transfer-amount" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" min="1">
            <button class="btn-primary" onclick="doTransfer()">–ü–µ—Ä–µ–¥–∞—Ç—å</button>
        </div>
    </div>

    <div id="premium-modal" class="modal">
        <div class="modal-content premium-content">
            <div class="modal-header">
                <button onclick="closeModal()">‚Üê</button>
                <span>Velora Premium</span>
            </div>
            <div class="premium-hero">
                <div class="premium-star">‚≠ê</div>
                <h2>Velora Premium</h2>
                <p>–†–∞–∑–±–ª–æ–∫–∏—Ä—É–π –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</p>
            </div>
            <div class="premium-features" id="premium-features"></div>
            <button class="btn-premium" onclick="buyPremium()">–ö—É–ø–∏—Ç—å Premium - 299‚ÇΩ/–º–µ—Å</button>
        </div>
    </div>

    <div id="admin-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button onclick="closeModal()">‚Üê</button>
                <span>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
            </div>
            <input type="text" id="admin-username" placeholder="@username">
            <input type="text" id="admin-value" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ">
            <div class="admin-actions" id="admin-actions"></div>
            <div class="admin-result" id="admin-result"></div>
        </div>
    </div>

    <div id="context-menu" class="context-menu" style="display:none">
        <button onclick="menuReply()">‚Ü© –û—Ç–≤–µ—Ç–∏—Ç—å</button>
        <button onclick="menuForward()">‚Üó –ü–µ—Ä–µ—Å–ª–∞—Ç—å</button>
        <div class="reaction-row">
            <button onclick="menuReaction('üëç')">üëç</button>
            <button onclick="menuReaction('‚ù§Ô∏è')">‚ù§Ô∏è</button>
            <button onclick="menuReaction('üòÇ')">üòÇ</button>
            <button onclick="menuReaction('üòÆ')">üòÆ</button>
            <button onclick="menuReaction('üò¢')">üò¢</button>
            <button onclick="menuReaction('üî•')">üî•</button>
        </div>
        <button id="menu-delete" class="danger" onclick="menuDelete()">üóë –£–¥–∞–ª–∏—Ç—å</button>
    </div>

    <input type="file" id="file-input" style="display:none" onchange="handleFile(event)">
    <input type="file" id="avatar-input" style="display:none" accept="image/*" onchange="handleAvatar(event)">
    
    <script src="app.js"></script>
</body>
</html>
