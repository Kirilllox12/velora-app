<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Velora</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app">
        <!-- Auth Screen -->
        <div id="auth-screen" class="screen active">
            <div class="auth-container">
                <div class="auth-logo">
                    <div class="logo-icon">V</div>
                    <h1>Velora</h1>
                    <p>–û–±—â–∞–π—Å—è –∫—Ä–∞—Å–∏–≤–æ</p>
                </div>
                <div class="auth-card">
                    <div class="auth-tabs">
                        <button class="auth-tab active" onclick="window.switchTab('login')">–í—Ö–æ–¥</button>
                        <button class="auth-tab" onclick="window.switchTab('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                    </div>
                    <form id="auth-form">
                        <div class="input-field">
                            <input type="text" id="username" placeholder=" " required>
                            <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        </div>
                        <div class="input-field">
                            <input type="password" id="password" placeholder=" " required>
                            <label>–ü–∞—Ä–æ–ª—å</label>
                        </div>
                        <div id="register-fields" style="display:none">
                            <div class="input-field">
                                <input type="password" id="password2" placeholder=" ">
                                <label>–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                            </div>
                            <div class="input-field">
                                <input type="text" id="displayname" placeholder=" ">
                                <label>–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</label>
                            </div>
                            <div class="color-picker">
                                <span>–¶–≤–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è:</span>
                                <div class="colors" id="accent-colors"></div>
                            </div>
                        </div>
                        <div class="auth-error" id="auth-error"></div>
                        <button type="submit" class="btn-auth" id="auth-btn">–í–æ–π—Ç–∏</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Chat Screen -->
        <div id="chat-screen" class="screen">
            <div class="chat-layout">
                <!-- Sidebar -->
                <div class="sidebar" id="sidebar">
                    <div class="sidebar-header">
                        <button class="btn-icon" onclick="window.showMainSettings()">
                            <svg viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
                        </button>
                        <h2>–ß–∞—Ç—ã</h2>
                        <button class="btn-icon" onclick="window.showCreateOptions()">
                            <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                        </button>
                    </div>
                    <div class="search-container">
                        <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                        <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫..." oninput="window.doSearch()">
                    </div>
                    <div class="chats-list" id="chats-list"></div>
                    <div class="search-results" id="search-results" style="display:none"></div>
                </div>

                <!-- Chat Panel -->
                <div class="chat-panel" id="chat-panel">
                    <div id="empty-chat" class="empty-state">
                        <div class="empty-icon">üí¨</div>
                        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</h3>
                        <p>–∏–ª–∏ –Ω–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä</p>
                    </div>
                    <div id="chat-content" style="display:none">
                        <div class="chat-header">
                            <button class="btn-back" onclick="window.backToChats()">
                                <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                            </button>
                            <div class="chat-header-avatar" id="chat-avatar">U</div>
                            <div class="chat-header-info" onclick="window.showChatProfile()">
                                <span class="chat-header-name" id="chat-title">–ß–∞—Ç</span>
                                <span class="chat-header-status" id="chat-subtitle">–æ–Ω–ª–∞–π–Ω</span>
                            </div>
                            <button class="btn-icon" onclick="window.startCall()">
                                <svg viewBox="0 0 24 24"><path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/></svg>
                            </button>
                            <button class="btn-icon" onclick="window.startVideoCall()">
                                <svg viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></svg>
                            </button>
                        </div>
                        <div class="messages" id="messages"></div>
                        <div class="message-input-container">
                            <div id="reply-preview" class="reply-bar" style="display:none">
                                <div class="reply-content">
                                    <span class="reply-name" id="reply-to-name"></span>
                                    <span class="reply-text" id="reply-to-text"></span>
                                </div>
                                <button onclick="window.cancelReply()">‚úï</button>
                            </div>
                            <div class="message-input-row">
                                <button class="btn-attach" onclick="window.showAttachMenu()">
                                    <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                                </button>
                                <input type="text" id="message-text" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ...">
                                <button class="btn-voice" id="voice-btn" onclick="window.toggleVoiceRecord()">
                                    <svg viewBox="0 0 24 24"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/></svg>
                                </button>
                                <button class="btn-send" onclick="window.sendMessage()">
                                    <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Attach Menu -->
    <div id="attach-menu" class="bottom-sheet" style="display:none">
        <div class="bottom-sheet-content">
            <div class="sheet-handle"></div>
            <div class="attach-grid">
                <button onclick="window.attachPhoto()"><div class="attach-icon photo">üì∑</div><span>–§–æ—Ç–æ</span></button>
                <button onclick="window.attachVideo()"><div class="attach-icon video">üé¨</div><span>–í–∏–¥–µ–æ</span></button>
                <button onclick="window.attachFile()"><div class="attach-icon file">üìé</div><span>–§–∞–π–ª</span></button>
                <button onclick="window.startCircleRecord()"><div class="attach-icon circle">‚≠ï</div><span>–ö—Ä—É–∂–æ–∫</span></button>
            </div>
        </div>
    </div>

    <!-- Create Options -->
    <div id="create-options" class="bottom-sheet" style="display:none">
        <div class="bottom-sheet-content">
            <div class="sheet-handle"></div>
            <div class="sheet-list">
                <button onclick="window.showCreateGroup()"><span class="list-icon">üë•</span>–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</button>
                <button onclick="window.showCreateChannel()"><span class="list-icon">üì¢</span>–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª</button>
                <button onclick="window.showJoinChat()"><span class="list-icon">üîó</span>–í–æ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ</button>
            </div>
        </div>
    </div>

    <!-- Message Context Menu -->
    <div id="message-menu" class="bottom-sheet" style="display:none">
        <div class="bottom-sheet-content">
            <div class="sheet-handle"></div>
            <div class="reaction-picker">
                <button onclick="window.menuReaction('üëç')">üëç</button>
                <button onclick="window.menuReaction('‚ù§Ô∏è')">‚ù§Ô∏è</button>
                <button onclick="window.menuReaction('üòÇ')">üòÇ</button>
                <button onclick="window.menuReaction('üòÆ')">üòÆ</button>
                <button onclick="window.menuReaction('üò¢')">üò¢</button>
                <button onclick="window.menuReaction('üî•')">üî•</button>
            </div>
            <div class="sheet-list">
                <button onclick="window.menuReply()"><span class="list-icon">‚Ü©Ô∏è</span>–û—Ç–≤–µ—Ç–∏—Ç—å</button>
                <button onclick="window.menuForward()"><span class="list-icon">‚ÜóÔ∏è</span>–ü–µ—Ä–µ—Å–ª–∞—Ç—å</button>
                <button onclick="window.menuCopy()"><span class="list-icon">üìã</span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button id="menu-delete" onclick="window.menuDelete()" class="danger"><span class="list-icon">üóë</span>–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- User Profile Modal -->
    <div id="user-profile-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="profile-modal">
            <div class="profile-cover"></div>
            <button class="modal-close" onclick="window.closeModal()">‚úï</button>
            <div class="profile-main">
                <div class="profile-avatar-large" id="profile-avatar">U</div>
                <div class="profile-badges" id="profile-badges"></div>
                <h2 id="profile-name">User</h2>
                <p class="profile-username" id="profile-username">@user</p>
                <p class="profile-bio" id="profile-bio"></p>
                
                <div class="profile-actions-row">
                    <button class="profile-action" onclick="window.openPrivateChatFromProfile()">
                        <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/></svg>
                        <span>–ù–∞–ø–∏—Å–∞—Ç—å</span>
                    </button>
                    <button class="profile-action" onclick="window.startCallToUser()">
                        <svg viewBox="0 0 24 24"><path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/></svg>
                        <span>–ó–≤–æ–Ω–æ–∫</span>
                    </button>
                    <button class="profile-action" onclick="window.startVideoCallToUser()">
                        <svg viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></svg>
                        <span>–í–∏–¥–µ–æ</span>
                    </button>
                    <button class="profile-action" onclick="window.sendGift()">
                        <svg viewBox="0 0 24 24"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2z"/></svg>
                        <span>–ü–æ–¥–∞—Ä–æ–∫</span>
                    </button>
                </div>

                <div class="profile-gifts-section" id="profile-gifts-section" style="display:none">
                    <h4>–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏</h4>
                    <div class="gifts-showcase" id="profile-gifts-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="main-settings" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="settings-modal">
            <div class="settings-header-bar">
                <button onclick="window.closeModal()">‚úï</button>
                <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                <div></div>
            </div>
            <div class="settings-profile" onclick="window.showMyProfile()">
                <div class="settings-avatar" id="settings-avatar">U</div>
                <div class="settings-info">
                    <span class="settings-name" id="settings-name">User</span>
                    <span class="settings-username" id="settings-username">@user</span>
                </div>
                <svg viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
            </div>
            <div class="crystals-card">
                <div class="crystals-left">
                    <span class="crystals-icon">üíé</span>
                    <div>
                        <span class="crystals-amount" id="my-crystals">0</span>
                        <span class="crystals-label">–∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤</span>
                    </div>
                </div>
                <button class="btn-transfer" onclick="window.showTransferModal()">–ü–µ—Ä–µ–¥–∞—Ç—å</button>
            </div>
            <div class="settings-list">
                <button onclick="window.showPremiumModal()"><span class="setting-icon premium">‚≠ê</span>Velora Premium</button>
                <button onclick="window.showAppearanceSettings()"><span class="setting-icon">üé®</span>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</button>
                <button id="support-btn" onclick="window.showSupportChat()"><span class="setting-icon">üí¨</span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
                <button id="inbox-btn" style="display:none" onclick="window.showSupportInbox()"><span class="setting-icon">üì•</span>–í—Ö–æ–¥—è—â–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è</button>
                <button id="admin-btn" style="display:none" onclick="window.showAdminPanel()"><span class="setting-icon">‚öôÔ∏è</span>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</button>
                <button onclick="window.logout()" class="danger"><span class="setting-icon">üö™</span>–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </div>

    <!-- My Profile Edit -->
    <div id="my-profile-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="settings-modal">
            <div class="settings-header-bar">
                <button onclick="window.backToSettings()">‚Üê</button>
                <span>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</span>
                <button onclick="window.saveProfile()" class="save-btn">‚úì</button>
            </div>
            <div class="profile-edit-avatar" onclick="window.pickAvatar()">
                <div class="edit-avatar" id="edit-avatar">U</div>
                <div class="edit-avatar-overlay">üì∑</div>
            </div>
            <div class="form-group">
                <label>–ò–º—è</label>
                <input type="text" id="edit-name">
            </div>
            <div class="form-group">
                <label>–û —Å–µ–±–µ</label>
                <textarea id="edit-bio" rows="3"></textarea>
            </div>
            <div class="aliases-section">
                <label>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ @username <span id="aliases-count">(0/0)</span></label>
                <div id="my-aliases-list"></div>
                <div id="add-alias-row" class="add-alias" style="display:none">
                    <input type="text" id="new-alias-input" placeholder="–Ω–æ–≤—ã–π_username">
                    <button onclick="window.addAlias()">+</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Group -->
    <div id="create-group-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="form-modal">
            <div class="form-modal-header">
                <button onclick="window.closeModal()">‚úï</button>
                <span>–ù–æ–≤–∞—è –≥—Ä—É–ø–ø–∞</span>
                <button onclick="window.createGroup()" class="save-btn">‚úì</button>
            </div>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" id="group-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ">
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="group-desc" placeholder="–û —á—ë–º —ç—Ç–∞ –≥—Ä—É–ø–ø–∞?"></textarea>
            </div>
            <label class="checkbox-label">
                <input type="checkbox" id="group-public">
                <span class="checkmark"></span>
                –ü—É–±–ª–∏—á–Ω–∞—è –≥—Ä—É–ø–ø–∞
            </label>
        </div>
    </div>

    <!-- Create Channel -->
    <div id="create-channel-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="form-modal">
            <div class="form-modal-header">
                <button onclick="window.closeModal()">‚úï</button>
                <span>–ù–æ–≤—ã–π –∫–∞–Ω–∞–ª</span>
                <button onclick="window.createChannel()" class="save-btn">‚úì</button>
            </div>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" id="channel-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ">
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="channel-desc" placeholder="–û —á—ë–º —ç—Ç–æ—Ç –∫–∞–Ω–∞–ª?"></textarea>
            </div>
            <label class="checkbox-label">
                <input type="checkbox" id="channel-public">
                <span class="checkmark"></span>
                –ü—É–±–ª–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª
            </label>
        </div>
    </div>

    <!-- Join Chat -->
    <div id="join-chat-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="form-modal compact">
            <h3>–í–æ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ</h3>
            <div class="form-group">
                <input type="text" id="join-link" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É">
            </div>
            <div class="form-buttons">
                <button class="btn-secondary" onclick="window.closeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" onclick="window.joinChat()">–í–æ–π—Ç–∏</button>
            </div>
        </div>
    </div>

    <!-- Gift Modal -->
    <div id="gift-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="gift-modal">
            <div class="gift-modal-header">
                <h3>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</h3>
                <button onclick="window.closeModal()">‚úï</button>
            </div>
            <div class="gifts-grid" id="gifts-grid"></div>
        </div>
    </div>

    <!-- Forward Modal -->
    <div id="forward-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="form-modal">
            <h3>–ü–µ—Ä–µ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</h3>
            <div class="forward-preview" id="forward-preview"></div>
            <div class="forward-list" id="forward-list"></div>
            <button class="btn-secondary full" onclick="window.closeModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- Premium Modal -->
    <div id="premium-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="premium-modal">
            <button class="modal-close" onclick="window.closeModal()">‚úï</button>
            <div class="premium-header">
                <div class="premium-star">‚≠ê</div>
                <h2>Velora Premium</h2>
                <p>–†–∞–∑–±–ª–æ–∫–∏—Ä—É–π –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</p>
            </div>
            <div class="premium-price-tag">
                <span class="price">159</span>
                <span class="currency">‚ÇΩ/–º–µ—Å</span>
            </div>
            <div class="premium-features" id="premium-features-list"></div>
            <button class="btn-premium" onclick="window.buyPremium()">–û—Ñ–æ—Ä–º–∏—Ç—å Premium</button>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="payment-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="payment-modal">
            <h3>üí≥ –û–ø–ª–∞—Ç–∞ Premium</h3>
            <div class="payment-amount">159 ‚ÇΩ</div>
            <div class="payment-card">
                <span class="card-label">–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã:</span>
                <span class="card-number" id="card-number">2200 7012 3007 8476</span>
                <button onclick="window.copyCardNumber()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
            <div class="payment-steps">
                <p>1. –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ 159‚ÇΩ –Ω–∞ –∫–∞—Ä—Ç—É</p>
                <p>2. –í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à @username</p>
                <p>3. –ù–∞–∂–º–∏—Ç–µ "–Ø –æ–ø–ª–∞—Ç–∏–ª"</p>
            </div>
            <div class="form-buttons">
                <button class="btn-secondary" onclick="window.closeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" onclick="window.confirmPayment()">‚úì –Ø –æ–ø–ª–∞—Ç–∏–ª</button>
            </div>
        </div>
    </div>

    <!-- Support Chat -->
    <div id="support-chat-modal" class="modal" style="display:none">
        <div class="modal-overlay"></div>
        <div class="support-modal">
            <div class="support-header">
                <button onclick="window.closeModal()">‚Üê</button>
                <div class="support-title">
                    <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Velora</span>
                    <small>–û–±—ã—á–Ω–æ –æ—Ç–≤–µ—á–∞–µ–º –±—ã—Å—Ç—Ä–æ</small>
                </div>
                <div class="support-avatar">üí¨</div>
            </div>
            <div class="support-messages" id="support-messages">
                <div class="support-welcome">
                    <div class="welcome-icon">üëã</div>
                    <h4>–ü—Ä–∏–≤–µ—Ç!</h4>
                    <p>–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–æ–±–ª–µ–º—É, –∏ –º—ã –ø–æ—Å—Ç–∞—Ä–∞–µ–º—Å—è –ø–æ–º–æ—á—å –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ.</p>
                </div>
            </div>
            <div class="support-input">
                <input type="text" id="support-message-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                <button onclick="window.sendToSupport()">
                    <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Support Inbox (Admin) -->
    <div id="support-inbox-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="support-modal">
            <div class="support-header">
                <button onclick="window.closeModal()">‚úï</button>
                <div class="support-title"><span>–û–±—Ä–∞—â–µ–Ω–∏—è</span></div>
                <div></div>
            </div>
            <div class="inbox-list" id="inbox-list"></div>
        </div>
    </div>

    <!-- Support Conversation -->
    <div id="support-conversation-modal" class="modal" style="display:none">
        <div class="modal-overlay"></div>
        <div class="support-modal">
            <div class="support-header">
                <button onclick="window.backToInbox()">‚Üê</button>
                <div class="support-title"><span id="conversation-title">–û–±—Ä–∞—â–µ–Ω–∏–µ</span></div>
                <div></div>
            </div>
            <div class="support-messages" id="conversation-messages"></div>
            <div class="support-input">
                <input type="text" id="admin-reply-input" placeholder="–û—Ç–≤–µ—Ç...">
                <button onclick="window.sendAdminReply()">
                    <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="admin-modal">
            <div class="admin-header">
                <button onclick="window.closeModal()">‚úï</button>
                <span>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
                <button onclick="window.getAdminStats()">üìä</button>
            </div>
            <div class="admin-content">
                <div class="form-group">
                    <label>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</label>
                    <input type="text" id="admin-username" placeholder="@username">
                </div>
                <div class="form-group">
                    <label>–ó–Ω–∞—á–µ–Ω–∏–µ / –ü—Ä–∏—á–∏–Ω–∞</label>
                    <input type="text" id="admin-value" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–ª–∏ –ø—Ä–∏—á–∏–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è">
                </div>
                <div class="admin-section">
                    <h4>NFT Uses</h4>
                    <div class="nft-buttons">
                        <button class="nft-btn" onclick="window.setNftCount(1)">1</button>
                        <button class="nft-btn" onclick="window.setNftCount(2)">2</button>
                        <button class="nft-btn" onclick="window.setNftCount(3)">3</button>
                    </div>
                    <div id="nft-aliases-inputs"></div>
                    <button id="nft-give-btn" class="btn-nft" style="display:none" onclick="window.giveNftWithAliases()">–í—ã–¥–∞—Ç—å NFT Uses</button>
                </div>
                <div class="admin-actions" id="admin-actions"></div>
            </div>
            <div id="admin-stats" style="display:none">
                <div id="stats-content"></div>
            </div>
        </div>
    </div>

    <!-- Appearance Settings -->
    <div id="appearance-settings" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="settings-modal compact">
            <div class="settings-header-bar">
                <button onclick="window.backToSettings()">‚Üê</button>
                <span>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</span>
                <div></div>
            </div>
            <div class="form-group">
                <label>–¢–µ–º–∞</label>
                <div class="theme-switcher">
                    <button class="theme-opt active" data-theme="dark" onclick="window.setTheme('dark')">üåô –¢—ë–º–Ω–∞—è</button>
                    <button class="theme-opt" data-theme="light" onclick="window.setTheme('light')">‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è</button>
                </div>
            </div>
            <div class="form-group">
                <label>–¶–≤–µ—Ç –∞–∫—Ü–µ–Ω—Ç–∞</label>
                <div class="colors-grid" id="settings-colors"></div>
            </div>
        </div>
    </div>

    <!-- Chat Profile -->
    <div id="chat-profile-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="profile-modal">
            <div class="profile-cover"></div>
            <button class="modal-close" onclick="window.closeModal()">‚úï</button>
            <div class="profile-main">
                <div class="profile-avatar-large chat-type" id="chat-profile-avatar">G</div>
                <h2 id="chat-profile-name">–ì—Ä—É–ø–ø–∞</h2>
                <p class="profile-type" id="chat-profile-type">–ì—Ä—É–ø–ø–∞</p>
                <p class="profile-bio" id="chat-profile-desc"></p>
                <div class="profile-stats">
                    <div class="stat"><span id="chat-profile-members">0</span><small>—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</small></div>
                </div>
                <div class="profile-link-row">
                    <span id="chat-profile-link"></span>
                    <button onclick="window.copyLink()">üìã</button>
                </div>
                <button class="btn-danger full" onclick="window.leaveChat()">–ü–æ–∫–∏–Ω—É—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Transfer Crystals -->
    <div id="transfer-modal" class="modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div class="form-modal compact">
            <h3>üíé –ü–µ—Ä–µ–¥–∞—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª—ã</h3>
            <p class="transfer-balance">–ë–∞–ª–∞–Ω—Å: <b id="transfer-balance">0</b></p>
            <div class="form-group">
                <input type="text" id="transfer-to" placeholder="@username –ø–æ–ª—É—á–∞—Ç–µ–ª—è">
            </div>
            <div class="form-group">
                <input type="number" id="transfer-amount" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" min="1">
            </div>
            <div class="form-buttons">
                <button class="btn-secondary" onclick="window.closeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" onclick="window.doTransfer()">–ü–µ—Ä–µ–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Media Viewer -->
    <div id="media-viewer" class="modal media-modal" style="display:none">
        <div class="modal-overlay" onclick="window.closeModal()"></div>
        <div id="media-content"></div>
    </div>

    <!-- Circle Preview -->
    <div id="circle-preview" class="modal" style="display:none">
        <div class="modal-overlay"></div>
        <div class="circle-modal">
            <video id="circle-video-preview" muted></video>
            <p class="recording-text">üî¥ –ó–∞–ø–∏—Å—å...</p>
            <div class="circle-buttons">
                <button class="btn-secondary" onclick="window.cancelCircle()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" onclick="window.stopCircleRecord()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Update Modal -->
    <div id="update-modal" class="modal" style="display:none">
        <div class="modal-overlay"></div>
        <div class="update-modal">
            <div class="update-icon">üöÄ</div>
            <h3>–î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ!</h3>
            <p id="update-version-text">–í–µ—Ä—Å–∏—è 1.0.1</p>
            <p class="update-desc">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ–±–Ω–æ–≤–∏—Ç—å –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π</p>
            <button class="btn-primary full" onclick="window.downloadUpdate()">‚¨á –°–∫–∞—á–∞—Ç—å</button>
            <button class="btn-text" onclick="window.skipUpdate()">–ü–æ–∑–∂–µ</button>
        </div>
    </div>

    <!-- Hidden inputs -->
    <input type="file" id="avatar-input" accept="image/*" style="display:none" onchange="window.handleAvatarPick(event)">
    <input type="file" id="photo-input" accept="image/*" style="display:none" onchange="window.handlePhotoPick(event)">
    <input type="file" id="video-input" accept="video/*" style="display:none" onchange="window.handleVideoPick(event)">
    <input type="file" id="file-input" style="display:none" onchange="window.handleFilePick(event)">

    <!-- Toast container -->
    <div id="toast-container"></div>

    <script src="app.js"></script>
</body>
</html>
